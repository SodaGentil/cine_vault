# 无符号整数的乘法运算原理

![](无符号乘法逻辑图.jpg)

## 本质

- 模拟无符号整数乘法的手算过程——“逐位相乘，错位相加”
    

## 运算过程(无符号)

### 开始

- ① 被乘数、乘数 分别放入寄存器 X、Y
    
- ② 乘积寄存器 P 置为 0
    
- ③ 计数器 C<sub>n</sub> 的初始值置为 n，这里的 $n$ 代表的是参与运算的数字的**位数**
    

### 进行 n 轮处理

- **重复 n 轮加法、移位运算，直到计数器 C<sub>n</sub> = 0**
    
    1. **将乘数寄存器 Y 的最低位**，送入“控制逻辑”进行判断
        
    2. ① 若 Y 的最低位为 1，则执行**加法**，运算结果写回 P (注意加法产生的进位需保存至进位触发器 C) ② 若 Y 的最低位为 0，则什么也不做
        
    3. 将 [C, P, Y] 视为整体，**逻辑右移一位**
        
    4. 计数器 C<sub>n</sub> 减 1
        **每一次向右移动一位就会进行n-1**


### 结束

- 当计数器 C<sub>n</sub>=0 时，乘法运算结束
    
- 用 2n 位 [P, Y] 暂存乘法运算结果，但最终**仅保留低 n 位 [Y]** 作为最终结果
    

## 溢出判断与处理（不带符号）

- **溢出判断**：若丢弃的高 n 位 [P] 不全为 0，说明发生溢出，并设置 OF 标志位=1
    
- **溢出处理**
    
    - **摆烂**：程序员可以选择忽略乘法溢出，乘法结果错了也不管
        
    - **不摆烂**：也可以在乘法指令之后执行一条“溢出自陷指令”，当 OF=1 时会触发“异常处理程序”来处理溢出




# 带符号整数的乘法运算原理


![](带符号乘法逻辑.jpg)

### 记忆技巧

- 辅助位 - Y最低位 = 1，P + [x]<sub>补</sub>
    
- 辅助位 - Y最低位 = 0，P + 0
    
- 辅助位 - Y最低位 = -1，P - [x]<sub>补</sub>
## 运算过程（带符号）

### 开始

- ① 被乘数、乘数 分别放入寄存器 X、Y
- ② 乘积寄存器 P 置为 0，<span style="color:red">辅助位为 0</span>
- ③ 计数器 C<sub>n</sub> 的初始值置为 n
 
### 进行 n 轮处理

- <span style="background-color:#eaeaea">重复 n 轮 <u>加/减法</u>、<u>移位</u>运算，直到计数器 C<sub>n</sub> = 0</span>
- 1. 将乘数寄存器 Y 的最低位、辅助位，2bit 送入 “控制逻辑” 进行判断
- 2. 根据寄存器 Y 的最低位、辅助位，决定是 “+[x]<sub>补</sub>” “-[x]<sub>补</sub>” “+0”
- 3. 将 **【P, Y, 辅助位】** 视为整体，<span style="color:purple">**算数右移**</span> 一位
- 4. 计数器 C<sub>n</sub> 减 1

### 结束

- 当计数器 C<sub>n</sub>=0 时，乘法运算结束
- 用 2n 位 【P, Y】 暂存乘法运算结果，但最终**仅保留低 n 位 【Y】 作为最终结果**

## 溢出判断与处理（带符号）

- 溢出判断： 若 2n 位的<span style="color:red">高 n+1 位不完全相同</span>，说明发生溢出，并设置 OF 标志位=1

- 溢出处理

	- 摆烂：程序员可以选择忽略乘法溢出，乘法结果错了也不管
	- 不摆烂：也可以在乘法指令之后执行一条“溢出自陷指令”，当 OF=1 时会触发“异常处理程序”来处理溢出



# 计算机实现乘法运算的三种方式

## 实现方式

- 由ALU、移位器、寄存器、控制逻辑组成的乘法电路![](乘法实现1.jpg)
    
- 阵列乘法器 (快速乘法器中的一种)![](乘法实现2.jpg)
    
- 用移位运算、加/减运算等效实现乘法![](乘法实现3.jpg)

## 实现方式的比较
![](乘法实现方式的对比.jpg)


[3-4-3 定点数的除法运算 — 补码除法运算 — 不恢复余数法_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1qG41197E4/?spm_id_from=333.788.player.switch&vd_source=5c70029856bd0ede843c8f0302514a1e&p=38)